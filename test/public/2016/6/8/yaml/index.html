
<!DOCTYPE html>
<html>
<head>


	<script type="text/javascript" src="/js/marked.js"></script>

	<title>YAML Syntax</title>
</head>

<body>
<blockquote>
  <p>source: http://docs.ansible.com/ansible/YAMLSyntax.html</p>
</blockquote>

<p>This page provides a basic overview of correct YAML syntax, which is how Ansible playbooks (our configuration management language) are expressed.</p>

<p>We use YAML because it is easier for humans to read and write than other common data formats like XML or JSON. Further, there are libraries available in most programming languages for working with YAML.</p>

<p>You may also wish to read Playbooks at the same time to see how this is used in practice.</p>

<!--more-->

<h2>YAML Basics</h2>

<p>For Ansible, nearly every YAML file starts with a list. Each item in the list is a list of key/value pairs, commonly called a “hash” or a “dictionary”. So, we need to know how to write lists and dictionaries in YAML.</p>

<p>There’s another small quirk to YAML. All YAML files (regardless of their association with Ansible or not) can optionally begin with --- and end with <em>....</em> This is part of the YAML format and indicates the start and end of a document.</p>

<p>All members of a list are lines beginning at the same indentation level starting with a "- " (a dash and a space):</p>

<h2>```yaml</h2>

<h1>A list of tasty fruits</h1>

<p>fruits:
    - Apple
    - Orange
    - Strawberry
    - Mango
...
```</p>

<p>A dictionary is represented in a simple key: value form (the colon must be followed by a space):</p>

<p>```yaml</p>

<h1>An employee record</h1>

<p>martin:
    name: Martin D'vloper
    job: Developer
    skill: Elite
```</p>

<p>More complicated data structures are possible, such as lists of dictionaries, dictionaries whose values are lists or a mix of both:</p>

<p>```yaml</p>

<h1>Employee records</h1>

<ul>
<li>martin:
name: Martin D'vloper
job: Developer
skills:

<ul>
<li>python</li>
<li>perl</li>
<li>pascal</li>
</ul></li>
<li>tabitha:
name: Tabitha Bitumen
job: Developer
skills:

<ul>
<li>lisp</li>
<li>fortran</li>
<li>erlang
```</li>
</ul></li>
</ul>

<p>Dictionaries and lists can also be represented in an abbreviated form if you really want to:</p>

<h2>```yaml</h2>

<p>martin: {name: Martin D'vloper, job: Developer, skill: Elite}
fruits: ['Apple', 'Orange', 'Strawberry', 'Mango']
```</p>

<p>Ansible doesn’t really use these too much, but you can also specify a boolean value (true/false) in several forms:</p>

<p><code>yaml
create_key: yes
needs_agent: no
knows_oop: True
likes_emacs: TRUE
uses_cvs: false
</code></p>

<p>Values can span multiple lines using | or >. Spanning multiple lines using a | will include the newlines. Using a > will ignore newlines; it’s used to make what would otherwise be a very long line easier to read and edit. In either case the indentation will be ignored. Examples are:</p>

<p>```yaml
include_newlines: |
            exactly as you see
            will appear these three
            lines of poetry</p>

<p>ignore_newlines: >
            this is really a
            single line of text
            despite appearances
```</p>

<p>Let’s combine what we learned so far in an arbitrary YAML example. This really has nothing to do with Ansible, but will give you a feel for the format:</p>

<h2>```yaml</h2>

<h1>An employee record</h1>

<p>name: Martin D'vloper
job: Developer
skill: Elite
employed: True
foods:
    - Apple
    - Orange
    - Strawberry
    - Mango
languages:
    perl: Elite
    python: Elite
    pascal: Lame
education: |
    4 GCSEs
    3 A-Levels
    BSc in the Internet of Things
```</p>

<p>That’s all you really need to know about YAML to start writing Ansible playbooks.</p>

<h2>Gotchas</h2>

<p>While YAML is generally friendly, the following is going to result in a YAML syntax error:</p>

<p><code>
foo: somebody said I should put a colon here: so I did
</code></p>

<p>You will want to quote any hash values using colons, like so:</p>

<p><code>yaml
foo: "somebody said I should put a colon here: so I did"
</code></p>

<p>And then the colon will be preserved.</p>

<p>Further, Ansible uses “{{ var }}” for variables. If a value after a colon starts with a “{”, YAML will think it is a dictionary, so you must quote it, like so:</p>

<p><code>yaml
foo: "{{ variable }}"
</code></p>

<p>The same applies for strings that start or contain any YAML special characters <code>[] {} : &gt; |</code> .</p>

<p>Boolean conversion is helpful, but this can be a problem when you want a literal yes or other boolean values as a string. In these cases just use quotes:</p>

<p><code>yaml
non_boolean: "yes"
other_string: "False"
</code></p>
</body>
</html>
